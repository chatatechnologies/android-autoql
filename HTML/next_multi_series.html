<!DOCTYPE html>
<html lang="en">
<head>
<title></title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1.0, user-scalable=no">
<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
<script src="https://unpkg.com/sticky-table-headers"></script>
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/highcharts-more.js"></script>
<script src="https://code.highcharts.com/modules/heatmap.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/modules/broken-axis.js"></script>
<link href="https://fonts.googleapis.com/css?family=Titillium+Web" rel="stylesheet">
<meta http-equiv='cache-control' content='no-cache'>
<meta http-equiv='expires' content='0'>
<meta http-equiv='pragma' content='no-cache'>
</head>
<body>
<style type="text/css">
    body, table, th{
        background: #3b3f46!important;
        color: #ffffff!important;
    }
    table {
        padding-top: 0px!important;
    }
    th {
        position: sticky;
        top: 0px;
        z-index: 10;
        padding: 10px 3px 5px 3px;
    }
    table {
        display: table;
        min-width: 100%;
        white-space: nowrap;
        border-collapse: separate;
        border-spacing: 0px!important;
        border-color: grey;
    }
    table {
        font-size: 16px;
    }
    tr td:first-child {
        text-align: center;
    }
    td {
        padding: 3px;
        text-align: center!important;
    }
    td, th {
      font-size: 16px;
      max-width: 200px;
      white-space: nowrap;
      width: 50px;
      overflow: hidden;
      text-overflow: ellipsis;
      border: 0.5px solid #cccccc;
    }
    span {
        display: none;
    }
    .green{
        color: #2ecc40;
    }
    .red {
        color: red;
    }
    .highcharts-credits,.highcharts-button-symbol, .highcharts-exporting-group {
        display: none;
    }
    .highcharts-background{
        fill: #3b3f46!important;
    }
    .splitView{
        position: relative;
    }
		tfoot {
        /*display: table-header-group;*/
				display: none;
    }
		.empty-state {
      text-align: center;
      font-family: '-apple-system','HelveticaNeue';
      color: #ffffff!important;
    }
    .alert-icon {
      font-size: 20px;
      color: #ffffff!important;
    }
</style>
<div class="splitView">
<div id='container' class='container'></div>
    <table id="idTableDataPivot"><thead><tr><th>Month</th><th>Advantage Oil</th><th>Bill & Sons</th></tr></thead><tfoot><tr><th>Month</th><th>Advantage Oil</th><th>Bill & Sons</th></tr></tfoot><tbody><tr><td>Jun 2021</td><td>$100.00</td><td>$0.00</td></tr><tr><td>Jun 2018</td><td>$6,950.00</td><td>$0.00</td></tr><tr><td>May 2018</td><td>$425.00</td><td>$0.00</td></tr><tr><td>Apr 2018</td><td>$2,850.00</td><td>$0.00</td></tr><tr><td>Mar 2018</td><td>$0.00</td><td>$1,642.00</td></tr><tr><td>Feb 2018</td><td>$0.00</td><td>$100.00</td></tr><tr><td>Jan 2018</td><td>$11,104.00</td><td>$13,871.70</td></tr><tr><td>Nov 2017</td><td>$0.00</td><td>$11,361.50</td></tr><tr><td>Jan 2017</td><td>$0.00</td><td>$5,235.80</td></tr><tr><td>Jul 2016</td><td>$0.00</td><td>$18,105.00</td></tr><tr><td>Jun 2016</td><td>$0.00</td><td>$3,885.00</td></tr></tbody></table>
    <table id="idTableBasic"><thead><tr><th>Customer</th><th>Month</th><th>Total Revenue</th></tr></thead><tfoot><tr><th>Customer</th><th>Month</th><th>Total Revenue</th></tr></tfoot><tbody><tr><td>Advantage Oil</td><td>Jun 2021</td><td>$100.00</td></tr><tr><td>Advantage Oil</td><td>Jun 2018</td><td>$6,950.00</td></tr><tr><td>Advantage Oil</td><td>May 2018</td><td>$425.00</td></tr><tr><td>Advantage Oil</td><td>Apr 2018</td><td>$2,850.00</td></tr><tr><td>Bill & Sons</td><td>Mar 2018</td><td>$1,642.00</td></tr><tr><td>Advantage Oil</td><td>Feb 2018</td><td>$0.00</td></tr><tr><td>Bill & Sons</td><td>Feb 2018</td><td>$100.00</td></tr><tr><td>Advantage Oil</td><td>Jan 2018</td><td>$11,104.00</td></tr><tr><td>Bill & Sons</td><td>Jan 2018</td><td>$13,871.65</td></tr><tr><td>Bill & Sons</td><td>Nov 2017</td><td>$11,361.54</td></tr><tr><td>Bill & Sons</td><td>Jan 2017</td><td>$5,235.75</td></tr><tr><td>Bill & Sons</td><td>Jul 2016</td><td>$18,105.00</td></tr><tr><td>Bill & Sons</td><td>Jun 2016</td><td>$3,885.00</td></tr></tbody></table>
</div>
<script>
    var type = 'column';
    var xAxis = 'Customer';
    var yAxis = 'Month';
		
    var dataChartBi = [{data: [3885.0, 18105.0, 5235.75, 11361.54, 13871.65, 100.0, 1642.0, 0.0, 0.0,0.0, 0.0]},
    {data: [0.0, 0.0, 0.0, 0.0, 11104.0, 0.0, 0.0, 2850.0, 425.0, 6950.0, 100.0]}]// todo redefine dataChartBi
    var datachartTri = [[0, 0, 100.0], [0, 1, 6950.0], [0, 2, 425.0], [0, 3, 2850.0], [1, 4, 1642.0], [0, 5, 0.0], [1, 5, 100.0], [0, 6, 11104.0], [1, 6, 13871.65], [1, 7, 11361.54], [1, 8, 5235.75], [1, 9, 18105.0], [1, 10, 3885.0]];
		
    var dataChartLine = [{"data":[100,6950,425,2850,0,0,11104,0,0,0,0],"name":"Advantage Oil"}, {"data":[0,0,0,0,1642,100,13871.7,11361.5,5235.8,18105,3885],"name":"Bill & Sons"}];
		var categoriesX = ["Advantage Oil", "Bill & Sons"];
		var categoriesY = ["Jun 2021", "Jun 2018", "May 2018", "Apr 2018", "Mar 2018", "Feb 2018", "Jan 2018", "Nov 2017", "Jan 2017", "Jul 2016", "Jun 2016"];
		
    var drillX = ["Advantage Oil", "Advantage Oil", "Advantage Oil", "Advantage Oil", "Bill & Sons", "Advantage Oil", "Bill & Sons", "Advantage Oil", "Bill & Sons", "Bill & Sons", "Bill & Sons", "Bill & Sons", "Bill & Sons"];
    var drillY = ["2021-06", "2018-06", "2018-05", "2018-04", "2018-03", "2018-02", "2018-01", "2017-11", "2017-01", "2016-07", "2016-06"];
		
    var drillTableY = ["Jun 2021", "Jun 2018", "May 2018", "Apr 2018", "Mar 2018", "Feb 2018", "Feb 2018", "Jan 2018", "Jan 2018", "Nov 2017", "Jan 2017", "Jul 2016", "Jun 2016"];
    var drillSpecial = ["2021-06", "2018-06", "2018-05", "2018-04", "2018-03", "2018-02", "2018-01", "2017-11", "2017-01", "2016-07", "2016-06"];
    var colorAxis = "#ffffff";
    var colorFill = "#3b3f46";
		var color1 = "#355c7d";
		var actual = "";
		var colors = ["#355c7d", "#6c5b7b", "#c06c84", "#f67280", "#f8b195"];
		var chart;
		var colorGhost = 'rgba(0,0,0,0)';
		var styleTooltip = {color: '#fff', display: 'none'}
		var subTitle = { text:'' }
		var yAxisTitle = {
        title: {
            text: yAxis,
            style: {
                    color: colorAxis
            }
        }
      }
    var xAxisStyle = { color: colorAxis };
    var defaultChart =
      {
        chart: {
          backgroundColor: colorGhost,
          fill: colorGhost,
          plotBackgroundColor: null,
          plotBorderWidth: null,
          plotShadow: false,
          type: "column"
        },
        title: subTitle,
        subTitle: subTitle,
        xAxis: {
          gridLineWidth: 0,
          categories: categoriesX,
          labels: {
		        rotation: -60,
		        style: {
		            color: colorAxis,
		             fontSize:'16px'
		        },
		        formatter: function(){
		         return formatterLabel(this.value);
		        }
		       },
          title: {
            text: xAxis,
            style: {
                    color: colorAxis
                }
          }
        },
        yAxis: {
          gridLineWidth: 0,
          labels: {
            style: {
                color: colorAxis,
                fontSize:'16px'
            }
          },
          title: yAxisTitle
        },
        colorAxis: {
          reversed: false,
          min: 0,
          minColor: '#FFFFFF',
          maxColor: '#26a7df'
        },
        showInLegend: true,
        legend: false,
        dataLabels: {
          enabled: false
        },
        tooltip: {
          backgroundColor: colorGhost,
          style: styleTooltip,
          formatter: function () {
            if (dataChartBi.length > 0){
                 drillDown(drillX[this.point.x])
            } else{
                 drillDown(drillX[this.point.y]);
            }
            return "";
          }
        },
        plotOptions: {
          pie: {
          allowPointSelect: true,
          cursor: 'pointer',
          dataLabels: {
            enabled: false,
            style: {
              color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
            }
          },
            showInLegend: true
          }
        },
        colors: colors,
        series: [0]
      };
            $('td').click(function() {
            triTypeTable = datachartTri.length > 0;
            var $this = $(this);
            var row = $this.closest('tr').index();
            var column = $this.closest('td').index();
            var firstColumn = $this.closest('tr');
            var finalText = firstColumn[0].firstChild.innerText;
            var strDate = firstColumn[0].children[1].innerText;
            if (type == "#idTableDataPivot" ){
                finalText = firstColumn[0].children[column].children[0].innerText;
            } else if (type == "idTableDatePivot" ) {
                finalText = $this[0].childNodes[0].id
            } else if ((type == "#idTableBasic" && triTypeTable) || (type == "idTableBasic" && triTypeTable) ) {
                finalText += "_"+drillTableY[row];
            } else {
                var index = categoriesX.indexOf(finalText)
                finalText = drillX[index]
            }
            //var d = new Date( Date.parse('2017 2') );
           drillDown( finalText );
    });
		function formatterLabel(value) {
      if (value.length > 7) {
        return value.slice(0, 7) + "...";
      }
     return value;
    }
    function drillDown(position){
        try {
            Android.boundMethod(position);
        } catch(err) {
            console.log(position);
        };
    }
    function changeGraphic(graphic) {
       if (graphic == "idTableBasic" || graphic == "idTableDataPivot" || graphic == "idTableDatePivot"){
           typeTable()
       }
       else{
           typeChart(graphic)
       }
    }
    function typeTable(){
       //$('#container').hide(400);
    }
    function finalSize(invert){
        var defaultWidth = "100%";
        var defaultHeight = "90%";
        var dynamicWidthSize = ""+categoriesX.length * 10+"%";
        var widthSize = categoriesX.length <= 10 ? defaultWidth : dynamicWidthSize;
        var dynamicHeightSize = ""+categoriesY.length * 10+"%";
        var heightSize = categoriesY.length <= 10 ? defaultHeight : dynamicHeightSize;
        var heightSizeFinal = invert ? heightSize : defaultHeight;
        $('.container, #container').css({ "width": widthSize, "position": "relative","height":heightSizeFinal, "z-index": "0" });
    }
    function typeChart(graphic){
       var inverted = graphic == "column" || graphic == "line" ? false : true;
       switch (graphic)
       {
           case "pie":
                pieType();
                break;
           case "line":
                lineType();
               break;
           case "word_cloud":
               cloudType();
               break;
           case "column":
           case "bar":
                biType(graphic,inverted);
                break;
           case "contrast_bar":
           case "contrast_line":
           case "contrast_column":
               biType3(graphic,inverted);
                break;
           case "forecasting":
           case "status_forecasting":
               foresType(graphic);
               break;
           case "bubble":
           case "heatmap":
                triType(graphic);
                break;
           case "stacked_bar":
                stackedType(true);
                break;
           case "stacked_column":
                stackedType(false);
                break;
           case "stacked_area":
           case "stacked_line":
                stackedArea();
                break;
        }
    }
            function pieType(){
       $('.container, #container').css({ "width": "99%", "position": "relative","height":"80%", "z-index": "0" });
       var newCategory = categoriesX;
       var chartBiSeries = {
        chart: {
          backgroundColor: colorGhost,
          fill: colorGhost,
          plotBackgroundColor: null,
          plotBorderWidth: null,
          plotShadow: false,
          type: "pie",
          inverted: false
        },
        title: subTitle,
        subTitle: subTitle,
        xAxis: {
          gridLineWidth: 0,
          categories: categoriesX,
          labels: {
		        rotation: -60,
		        style: {
		            color: colorAxis,
		             fontSize:'16px'
		        },
		        formatter: function(){
		         return formatterLabel(this.value);
		        }
		       },
          title: {
            text: xAxis,
            style: {
                    color: colorAxis
                }
          }
        },
        yAxis: {
          gridLineWidth: 0,
          labels: {
            style: {
                color: colorAxis,
                fontSize:'16px'
            }
          },
          title: yAxisTitle
        },
        colorAxis: {
          reversed: false,
          min: 0,
          minColor: '#FFFFFF',
          maxColor: '#26a7df'
        },
        showInLegend: true,
        legend: false,
        dataLabels: {
          enabled: false
        },
        tooltip: {
          backgroundColor: colorGhost,
          style: styleTooltip,
          formatter: function () {
            if (dataChartBi.length > 0){
                 drillDown(drillX[this.point.x])
            } else{
                 drillDown(drillX[this.point.y]);
            }
            return "";
          }
        },
        plotOptions: {
          pie: {
          allowPointSelect: true,
          cursor: 'pointer',
          dataLabels: {
            enabled: false,
            style: {
              color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
            }
          },
            showInLegend: true
          }
        },
        colors: colors
      };

       chart.destroy()
      if (dataChartBi[0] instanceof Array) {
        chart = Highcharts.chart('container', defaultChart);
        chartBiSeries.series = {
            colorByPoint: false,
            name: newCategory,
            data: dataChartBi
        }
        chart.update(chartBiSeries);
      } else {
        var dataPie = Array.of(dataChartBi[0]);
        chartBiSeries.title = subTitle
        chartBiSeries.subTitle = subTitle
        chartBiSeries.showInLegend = true
        chartBiSeries.legend = false
        chartBiSeries.colors = colors
        chartBiSeries.series = dataPie

        chart = Highcharts.chart('container', chartBiSeries);
      }
    }
    function lineType(){
        finalSize(false);
        if (dataChartBi.length > 0){
            biType("line",false);
        }else{
            chart.destroy();
                chart = Highcharts.chart('container', {
                    colors: colors,
                    title: subTitle,
                    subTitle: subTitle,
                    yAxis: {
                        title: {
                            text: yAxis
                        },
                        labels: {
                           style: {
                               color: colorAxis,
                           }
                         },
                    },
                    legend: {
                               itemStyle: {
                                   color: colorAxis,
                                   fontWeight: 'bold'
                               }
                           },
                    xAxis: {
                        categories: categoriesX,
                        legend:{
                            step:1
                        },
                        labels: {
									        rotation: -60,
									        style: {
									            color: colorAxis,
									             fontSize:'16px'
									        },
									        formatter: function(){
									         return formatterLabel(this.value);
									        }
									       },
                        title: {
                            text: xAxis,
                            style: {
                               color: colorAxis,
                               fontSize:'16px'
                           }
                        }
                    },
                    chart: {
                        type: "line"
                    },
                    series: dataChartLine,
                    tooltip: {
                        formatter: function () {
                            var position = categoriesY.indexOf(this.series.name);
                            drillDown(""+drillX[this.point.x]+"_"+drillY[position]);
                            return "";
                        }
                    },
                });
                
        }
    }
function biType(type,inverted) {
    var newCategory = categoriesX;
    var chartBiSeries = {
        chart: {
            type: type,
            inverted: inverted
        },
        xAxis: {
            gridLineWidth: 0,
            categories: categoriesY, // TODO define categories with 3 dimensions
            labels: {
                rotation: -60,
                style: {
                    color: colorAxis,
                    fontSize:'16px'
                },
                formatter: function() {
                    return formatterLabel(this.value);
                }
            },
            title: {
                text: yAxis
            }
        },
        yAxis: {
            gridLineWidth: 0,
            //min: 0, TODO refine min
            //max: 0, TODO refine min
            title: {
                text: xAxis,
                style: {
                    color: colorAxis,
                    fontSize:'16px'
                }
            }
        },
        tooltip: {
            backgroundColor: colorGhost,
            style: styleTooltip,
            formatter: function () {
                var colorIndex = this.colorIndex;
                var x = this.point.x;
                var suffix = "";
                if (! (dataChartBi[0] instanceof Array)) {
                    suffix = "_" + colorIndex;
                }
                drillDown(drillX[x] + suffix);
                return "";
            }
        }
    };
    if (categoriesX.length == 1 && newCategory[0] === "") {
        var newCategory = categoriesY;
    }
    finalSize(inverted);
    chart.destroy();
    if (dataChartBi[0] instanceof Array) {
        console.log('column first option')
        chart = Highcharts.chart('container', defaultChart);
        chartBiSeries.series = {
            colorByPoint: false,
            name: newCategory,
            data: dataChartBi
        }
        chart.update(chartBiSeries);
    } else {
        console.log('column second option')
        console.log('las series ' + dataChartBi)
        chartBiSeries.title = subTitle
        chartBiSeries.subTitle = subTitle
        chartBiSeries.showInLegend = true
        chartBiSeries.legend = false
        chartBiSeries.colors = colors
        chartBiSeries.series = dataChartBi

        chart = Highcharts.chart('container', chartBiSeries);
    }
}
    function biType3(type,inverted){
        finalSize(inverted);
        typeFinal = type.replace("contrast_", "");
        chart.destroy()
                chart = Highcharts.chart('container', {
                    chart: {
                        type: typeFinal
                    },
                    colors: colors,
                    xAxis: {
                         gridLineWidth: 0,
                         categories: categoriesX,
                         labels: {
									        rotation: -60,
									        style: {
									            color: colorAxis,
									             fontSize:'16px'
									        },
									        formatter: function(){
									         return formatterLabel(this.value);
									        }
									       },
                         title: {
                           text: xAxis
                         }
                       },
                    series: dataChartLine
                });
    }
            function triType(type){
        finalSize(false);
        chart.destroy();
                chart = Highcharts.chart('container', {
                    chart: {
                        type: type,
                        inverted: true
                    },
                    title: subTitle,
                    subTitle: subTitle,
                    xAxis: {
											min: 0,
                        gridLineWidth: 0,
                        categories: categoriesX,
                        labels: {
									        rotation: -60,
									        style: {
									            color: colorAxis,
									             fontSize:'16px'
									        },
									        formatter: function(){
									         return formatterLabel(this.value);
									        }
									       },
                        title: {
                            text: xAxis
                        }
                    },
                    yAxis: {
                        min: 0,
                        gridLineWidth: 0,
                        categories: categoriesY,
                        title: {
                            text: yAxis
                        },
                        labels: {
                           style: {
                               color: colorAxis
                           }
                         },
                    },
                    colorAxis: {
                        reversed: false,
                        min: 0,
                        minColor: colorFill,
                        maxColor: colors[0]
                    },
                    legend: {
                        align: 'right',
                        layout: 'vertical',
                        margin: 0,
                        reversed: false,
                        verticalAlign: 'middle'
                    },
                    tooltip: {
                        backgroundColor: colorGhost,
                         style: styleTooltip,
                        formatter: function () {
                             drillDown(""+categoriesX[this.point.x]+"_"+drillY[this.point.y])
                            return "";
                        }
                    },
                    series: [{
                            colorByPoint: false,
                            dataLabels: {
                                enabled: false
                            },
                            data: datachartTri
                   }]
                });
    }
    
    function stackedType(invert){
        finalSize(invert);
        var rotation = invert ? 10 : 40
        chart.destroy();
        chart = Highcharts.chart('container', {
            chart: {
                type: 'column',
                inverted: invert
            },
            title: subTitle,
            subTitle: subTitle,
            yAxis: {
                title: {
                    text: yAxis
                },
                labels: {
                    style: {
                        color: colorAxis,
                    }
                },
            },
            legend: {
                enabled: false
            },
            xAxis: {
                tickInterval: 1,
                breaks: [{
                    from: -1,
                    to: -1,
                    breakSize: 1
                }],
                categories: categoriesY,
                labels: {
                    rotation: -60,
                    style: {
                        color: colorAxis,
                        fontSize:'16px'
                    },
                    formatter: function(){
                        return formatterLabel(this.value);
                    }
                },
                title: {
                    text: xAxis
                }
            },
            dataLabels: {
                enabled: false,
                style: {
                    color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                }
            },
            tooltip: {
                backgroundColor: colorGhost,
                style: styleTooltip,
                formatter: function () {
                    var position = categoriesY.indexOf(this.series.name);
                    drillDown(""+drillX[this.point.x]+"_"+drillY[position]);
                    return "";
                }
            },
            colors: colors,
            plotOptions: {
                column: {
                    stacking: 'normal'
                }
            },
            series: dataChartLine
        });
    }
function stackedArea(){
    
    var rotation = 40
    chart.destroy();
            chart = Highcharts.chart('container', {
                chart: {
                    type: "area",
                    inverted: false
                },
                title: subTitle,
                subTitle: subTitle,
                yAxis: {
                    title: {
                        text: yAxis
                    },
                    labels: {
                       style: {
                           color: colorAxis,
                       }
                     },
                },
                legend: {
                    enabled: false
                },
                xAxis: {
                    categories: categoriesX,
                    labels: {
							        rotation: -60,
							        style: {
							            color: colorAxis,
							             fontSize:'16px'
							        },
							        formatter: function(){
							         return formatterLabel(this.value);
							        }
							       },
                    title: {
                        text: xAxis
                    }
                },
                dataLabels: {
                    enabled: false,
                    style: {
                        color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                    }
                },
                tooltip: {
                     backgroundColor: colorGhost,
                     style: styleTooltip,
                     formatter: function () {
                         var position = categoriesY.indexOf(this.series.name);
                         console.log(position);
                         drillDown(""+categoriesX[this.point.x]+"_"+drillY[position]);
                       return "";
                     }
                   },
                colors: [colors[0]],
                plotOptions: {
                    column: {
                        stacking: 'normal'
                    }
                },
                series: dataChartLine
            });
}
startScript();
function startScript() {
    chart = Highcharts.chart('container', defaultChart);
}
hideAll();
function hideAll(){
    $('table').css({ "width": "100%", "position": "relative","height":"90%", "z-index": "0" });
    $( "#idTableBasic, #idTableDataPivot, #idTableDatePivot, #container" ).hide();
    if (type == "#idTableBasic" || type == "#idTableDataPivot" || type == "#idTableDatePivot"){
        $(""+type+"").show()
    } else{
        $("#container").show()
        changeGraphic(type);
        if (false){
            $( "#idTableBasic").show()
        }
    }
}
function hideTables(idHide, idShow, type2) {
    if (idHide != idShow){
      $( idHide ).hide(0);
      $( idShow ).show(0);
    }
    //$( idShow ).show("slow");
    type = type2;
    changeGraphic(type2);
}
$('#idTableBasic tfoot th').each(function () {
    var indexInput = $(this).index();
    var title = $(this).text();
    var idInput = title.replace(' ', '_').replace('(', '_').replace(')', '_').replace('&', '_') + '_DataPivot';
	$(this).html(
        '<input id=' + idInput +
        ' type="text" placeholder="filter column..."/>');

    $("#" + idInput).on('input', function () {
        var filter = $(this).val().toUpperCase();
        var table = document.getElementById("idTableBasic");
        var tr = table.getElementsByTagName("tr");

        for (index = 0; index < tr.length; index++) {
            td = tr[index].getElementsByTagName("td")[indexInput];
            if (td) {
                txtValue = td.textContent || td.innerText;
                if (txtValue.toUpperCase().indexOf(filter) > -1) {
                    tr[index].style.display = "";
                } else {
                    tr[index].style.display = "none";
                }
            }
        }
    });
});
$('#idTableDataPivot tfoot th').each(function () {
    var indexInput = $(this).index();
    var title = $(this).text();
    var idInput = title.replace(' ', '_').replace('(', '_').replace(')', '_').replace('&', '_') + '_DataPivot';
	$(this).html(
        '<input id=' + idInput +
        ' type="text" placeholder="Search on ' + title + '"/>');

    $("#" + idInput).on('input', function () {
        var filter = $(this).val().toUpperCase();
        var table = document.getElementById("idTableDataPivot");
        var tr = table.getElementsByTagName("tr");

        for (index = 0; index < tr.length; index++) {
            td = tr[index].getElementsByTagName("td")[indexInput];
            if (td) {
                txtValue = td.textContent || td.innerText;
                if (txtValue.toUpperCase().indexOf(filter) > -1) {
                    tr[index].style.display = "";
                } else {
                    tr[index].style.display = "none";
                }
            }
        }
    });
});
function showFilter() {
	if ( $('tfoot').is(':visible') ) {
		$('tfoot').css({'display': 'none'});
	} else {
		$('tfoot').css({'display': 'table-header-group'});
	}
}
</script>
</body>
</html>